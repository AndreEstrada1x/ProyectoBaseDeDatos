Table USER {
    user_id INT [primary key]
    name VARCHAR(100)
    email VARCHAR(100) [unique]
    password VARCHAR(255)
    user_type VARCHAR(50) [not null, note: "Example: student, administrator"]
}

Table USER_ROLE {
    role_id INT [primary key]
    role_name VARCHAR(50) [not null, unique]
    description TEXT
}

Table LESSON {
    lesson_id INT [primary key]
    title VARCHAR(255)
    description TEXT
    difficulty_level VARCHAR(50)
    points_awarded INT [not null, default: 0, note: "Must be >= 0"]
}

Table LESSON_CATEGORY {
    category_id INT [primary key]
    category_name VARCHAR(100) [not null, unique]
}

Table LESSON_CATEGORY_REL {
    lesson_id INT [not null]
    category_id INT [not null]
    PRIMARY KEY (lesson_id, category_id)
}

Table EXAM {
    exam_id INT [primary key]
    title VARCHAR(255)
    description TEXT
    difficulty_level VARCHAR(50)
    points_awarded INT [not null, default: 0, note: "Must be >= 0"]
}

Table PROGRESS {
    progress_id INT [primary key]
    user_id INT [not null]
    lesson_id INT [not null]
    status VARCHAR(50)
    completion_date TIMESTAMP
}

Table EXAM_PROGRESS {
    exam_progress_id INT [primary key]
    user_id INT [not null]
    exam_id INT [not null]
    status VARCHAR(50) [not null]
    completion_date TIMESTAMP
}

Table EXAM_RESULT {
    exam_result_id INT [primary key]
    user_id INT [not null]
    exam_id INT [not null]
    score INT [not null, note: "Must be >= 0"]
    date TIMESTAMP [default: `CURRENT_TIMESTAMP`]
}

Table LESSON_RESULT {
    lesson_result_id INT [primary key]
    user_id INT [not null]
    lesson_id INT [not null]
    score INT [not null, note: "Must be >= 0"]
    date TIMESTAMP [default: `CURRENT_TIMESTAMP`]
}

Table USER_SCORE {
    score_id INT [primary key]
    user_id INT [not null]
    total_points INT [default: 0, note: "Must be >= 0"]
}

Table REWARD {
    reward_id INT [primary key]
    name VARCHAR(100)
    description TEXT
    cost_points INT [not null, note: "Must be > 0"]
}

Table REWARD_REDEMPTION {
    redemption_id INT [primary key]
    user_id INT [not null]
    reward_id INT [not null]
    date TIMESTAMP [default: `CURRENT_TIMESTAMP`]
}

Table LEADERBOARD {
    leaderboard_id INT [primary key]
    user_id INT [not null]
    position INT [not null, note: "Must be > 0"]
    total_points INT [not null, note: "Must be >= 0"]
}

Table QUESTION {
    question_id INT [primary key]
    question_text TEXT
    question_type VARCHAR(50)
}

Table EXAM_QUESTION {
    exam_id INT [not null]
    question_id INT [not null]
    PRIMARY KEY (exam_id, question_id)
}

Table ANSWER_OPTION {
    option_id INT [primary key]
    question_id INT [not null]
    option_text TEXT
    is_correct BOOLEAN
}

Table NOTIFICATION_HISTORY {
    notification_id INT [primary key]
    user_id INT [not null]
    message TEXT
    sent_date TIMESTAMP
}

Table LOG {
    log_id INT [primary key]
    timestamp TIMESTAMP [not null, default: `CURRENT_TIMESTAMP`]
    user VARCHAR(100) [not null]
    affected_table VARCHAR(100) [not null]
    operation VARCHAR(50) [not null, note: "Allowed values: SELECT, INSERT, UPDATE, DELETE"]
    details TEXT
}

Ref: USER.user_type > USER_ROLE.role_name
Ref: PROGRESS.user_id > USER.user_id
Ref: PROGRESS.lesson_id > LESSON.lesson_id
Ref: EXAM_PROGRESS.user_id > USER.user_id
Ref: EXAM_PROGRESS.exam_id > EXAM.exam_id
Ref: NOTIFICATION_HISTORY.user_id > USER.user_id
Ref: EXAM_QUESTION.exam_id > EXAM.exam_id
Ref: EXAM_QUESTION.question_id > QUESTION.question_id
Ref: ANSWER_OPTION.question_id > QUESTION.question_id
Ref: EXAM_RESULT.user_id > USER.user_id
Ref: EXAM_RESULT.exam_id > EXAM.exam_id
Ref: LESSON_RESULT.user_id > USER.user_id
Ref: LESSON_RESULT.lesson_id > LESSON.lesson_id
Ref: LESSON_CATEGORY_REL.lesson_id > LESSON.lesson_id
Ref: LESSON_CATEGORY_REL.category_id > LESSON_CATEGORY.category_id
Ref: USER_SCORE.user_id > USER.user_id
Ref: REWARD_REDEMPTION.user_id > USER.user_id
Ref: REWARD_REDEMPTION.reward_id > REWARD.reward_id
Ref: LEADERBOARD.user_id > USER.user_id
